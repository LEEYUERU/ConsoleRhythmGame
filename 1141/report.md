# C++ 控制台節奏遊戲：專案分析報告

## 1. 遊戲總覽

本專案是一款在 Windows 控制台 (Console) 環境下運行的四軌道下落式節奏遊戲。玩家需在音符（Note）到達螢幕底部的判定線時，按下對應的按鍵以獲得分數。遊戲的目標是在生命值（HP）耗盡前，挑戰並獲得更高的分數與連擊（Combo）。

## 2. 核心功能

### 遊戲玩法

*   **四軌道設計**: 遊戲畫面包含四條垂直的軌道，音符會從軌道頂端隨機生成並向下移動。
*   **音符判定**: 在畫面下方設有一條判定線（Judge Line）。當音符與判定線重疊時，即為玩家的打擊時機。
*   **遊戲結束條件**: 玩家的生命值（HP）初始為 100。每當錯過一個音符，生命值便會扣除 10 點。當生命值歸零時，遊戲結束。

### 輸入與判定

*   **按鍵對應**: 遊戲的四條軌道由左至右分別對應鍵盤上的 'd', 'f', 'j', 'k' 四個按鍵。
*   **時機判定**: 根據玩家按下按鍵的準確度，系統會給予兩種判定：
    *   **Perfect**: 完全準確，獲得 100 分。
    *   **Good**: 略有偏差，獲得 50 分。

### 計分系統

*   **分數 (Score)**: 玩家的總得分，根據每次打擊的判定結果（Perfect/Good）進行累加。
*   **連擊 (Combo)**: 連續成功打擊音符的次數。若錯過任何一個音符，連擊數將立即歸零。
*   **生命值 (HP)**: 玩家的生命計量，錯過音符會導致扣減。

### 動態難度

遊戲的挑戰性會隨著玩家表現而提升。當玩家分數越高，音符下落的速度就越快，要求玩家具備更快的反應速度。

### 視覺回饋

*   **打擊回饋**: 當玩家成功打擊音符時，對應軌道的判定線會短暫閃爍，提供即時的視覺確認。
*   **軌道顏色變化**: 為了提供進度感，軌道的顏色會根據玩家的分數變化。每獲得 2000 分，軌道便會更換一次顏色，顏色順序參照彩虹光譜，從而讓玩家能直觀感受到自己的進步。

## 3. 介面設計

遊戲完全基於文字與符號構成，介面簡潔清晰。

*   **主選單**: 遊戲啟動時顯示，提供「開始遊戲」與「結束遊戲」兩個選項，玩家可使用鍵盤上下鍵進行選擇。
*   **遊戲介面**: 遊戲進行中的主要畫面。左半部分為音符下落的四條軌道，右半部分則即時顯示玩家的 **Score**、**Combo** 與 **HP** 數值。
*   **遊戲結束畫面**: 當生命值歸零時觸發，畫面會顯示 "Game Over!" 以及玩家的最終分數。

## 4. 技術實現

*   **開發語言與環境**: 使用標準 C++ 語言編寫，並可在 Windows 控制台環境中直接運行。
*   **核心函式庫**:
    *   `<iostream>`: 用於處理基本的輸入輸出。
    *   `<vector>`: 用於管理動態生成的音符物件。
    *   `rlutil.h`: 一個輕量的第三方標頭檔，提供了控制台顏色、游標定位等功能，是本遊戲實現視覺效果的關鍵。
*   **程式碼結構**:
    *   `struct Note`: 用於儲存單一音符的屬性，包含位置（x, y）與是否活動（active）。
    *   `main()`: 程式主進入點，包含了主選單、遊戲主迴圈（Game Loop）及遊戲結束的完整邏輯。
    *   `drawFrame()`: 負責繪製靜態的遊戲框架，如軌道線與資訊標籤。
    *   `updateDynamicUI()`: 負責更新動態資訊，如分數、連擊數等。
    *   `checkInput()`: 處理玩家的鍵盤輸入並執行判定邏輯。
    *   `getTrackColor()`: 根據當前分數回傳對應的軌道顏色。
*   **繪圖機制**: 遊戲畫面完全是透過 `rlutil::locate(x, y)` 將游標移動到控制台的特定座標，再利用 `std::cout` 輸出文字或符號來繪製的。畫面的更新與動畫效果（如音符下落）是透過「清除-更新-重繪」的迴圈來實現。

## 5. 總結與未來展望

### 優點

*   **核心玩法明確**: 遊戲規則簡單直觀，易於上手。
*   **即時回饋**: 分數、連擊和生命值的即時更新，以及打擊與顏色變化等視覺回饋，有效地提升了玩家的沉浸感。
*   **輕量化**: 無需複雜的依賴，程式碼簡潔，可輕鬆在任何 Windows 環境下編譯和運行。

### 可改進之處

*   **音樂與音效**: 作為一款節奏遊戲，目前最大的缺失是沒有音樂。未來可嘗試引入播放音訊的函式庫，使音符與音樂節拍同步。
*   **預設譜面**: 目前的音符是隨機生成的，缺乏節奏感。可以設計譜面讀取功能，從外部檔案（如 .txt 或 .json）讀取預先編排好的音符序列。
*   **更豐富的視覺效果**: 可增加更多樣的粒子效果或動畫，以提升視覺表現力。
*   **排行榜系統**: 增加一個本地儲存的排行榜，記錄玩家的最佳分數，以提供重複遊玩的動力。

